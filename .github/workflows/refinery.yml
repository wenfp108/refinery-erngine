name: ğŸš€ Refinery Engine (Hourly)

on:
  schedule:
    - cron: '0 * * * *'  # æ¯å°æ—¶ç¬¬0åˆ†é’Ÿè§¦å‘ (UTCæ—¶é—´ï¼Œå¯¹åº”åŒ—äº¬æ—¶é—´æ•´ç‚¹)
  workflow_dispatch:      # å…è®¸æ‰‹åŠ¨æŒ‰é’®è§¦å‘

jobs:
  refine:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Code
        uses: actions/checkout@v3

      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.9'

      - name: Install Dependencies
        run: pip install -r requirements.txt

      - name: Run Refinery
        env:
          GH_PAT: ${{ secrets.GH_PAT }}
          SUPABASE_URL: ${{ secrets.SUPABASE_URL }}
          SUPABASE_KEY: ${{ secrets.SUPABASE_KEY }}
          FORCE_REPORT: 'true'      # å¼ºåˆ¶ç”Ÿæˆæ¯å°æ—¶æˆ˜æŠ¥
          FORCE_FULL_SCAN: 'false'   # ğŸ”¥ å…¨é‡è¡¥å½•å¼€å…³ (ç¬¬ä¸€æ¬¡è·‘å®Œåï¼Œè¯·è®°å¾—æ”¹å› 'false')
        run: python refinery.py
